{"openapi":"3.1.0","info":{"title":"Document Intelligence Platform","description":"Unified API for document search, indexing, templates, vehicle management, and document inbox","version":"1.0.0"},"paths":{"/api/search/":{"post":{"tags":["Search"],"summary":"Search","description":"Simplified search endpoint\n\nDelegates all business logic to backend services:\n- Multi-strategy retrieval (vector + database)\n- Hybrid results fusion and ranking\n- Quality filtering\n\nAPI layer only handles:\n- Request validation (via Pydantic)\n- Routing to backend\n- Response formatting\n- Error handling","operationId":"search_api_search__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/search/health":{"get":{"tags":["Search","Search"],"summary":"Search Health","description":"Health check for search system","operationId":"search_health_api_search_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/system/health":{"get":{"tags":["System"],"summary":"Health Check","description":"Simple health check endpoint.\nReturns 200 if service is running.","operationId":"health_check_api_system_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheck"}}}}}}},"/api/system/status":{"get":{"tags":["System"],"summary":"Get Status","description":"Get detailed system status including:\n- Component availability\n- Database connection\n- Embedding model status\n- Hybrid search configuration","operationId":"get_status_api_system_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemStatus"}}}}}}},"/api/indexing/start":{"post":{"tags":["Indexing"],"summary":"Start Indexing","description":"Start document indexing process.\n\nPipeline:\n- Part 1 (if not skipped): Document conversion using Docling\n- Part 2 (if not skipped): Chunking and embedding generation\n\nModes:\n- **full**: Reindex all documents\n- **incremental**: Only new/modified documents\n\nProcess runs in background. Use /status endpoint to check progress.\n\nExample:\n```json\n{\n  \"mode\": \"incremental\",\n  \"batch_size\": 50,\n  \"force_reindex\": false,\n  \"delete_existing\": false\n}\n```","operationId":"start_indexing_api_indexing_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexingResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/stop":{"post":{"tags":["Indexing"],"summary":"Stop Indexing","description":"Stop running indexing task.\n\n- Gracefully stops current processing\n- Completes current batch before stopping\n- Returns partial results\n\nArgs:\n    task_id: ID of the task to stop","operationId":"stop_indexing_api_indexing_stop_post","parameters":[{"name":"task_id","in":"query","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/status":{"get":{"tags":["Indexing"],"summary":"Get Status","description":"Get indexing status.\n\n- Returns current progress and statistics\n- Shows processing stage and ETA\n- Lists any errors encountered\n\nIf task_id not provided, returns status of most recent task.\n\nArgs:\n    task_id: Optional task ID. If not provided, returns most recent task.","operationId":"get_status_api_indexing_status_get","parameters":[{"name":"task_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexingStatusResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/history":{"get":{"tags":["Indexing"],"summary":"Get History","description":"Get indexing history.\n\nReturns list of past indexing runs with:\n- Completion status\n- Processing time\n- Files processed\n- Success rate\n\nArgs:\n    limit: Maximum number of history items to return (default: 10)","operationId":"get_history_api_indexing_history_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexingHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/clear":{"delete":{"tags":["Indexing"],"summary":"Clear Index","description":"Clear entire index.\n\n⚠️ WARNING: This deletes all indexed documents!\n\n- Requires explicit confirmation\n- Cannot be undone\n- Use for testing or complete reindex\n\nArgs:\n    confirm: Must be true to proceed with deletion","operationId":"clear_index_api_indexing_clear_delete","parameters":[{"name":"confirm","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Confirm"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/reindex":{"post":{"tags":["Indexing"],"summary":"Reindex Files","description":"Reindex specific files.\n\n- Deletes existing records for specified files\n- Re-processes only those files\n- Useful for fixing specific documents\n\nExample:\n```json\n{\n  \"filenames\": [\"document1.md\", \"document2.md\"],\n  \"force\": true\n}\n```","operationId":"reindex_files_api_indexing_reindex_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReindexFilesRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexingResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/indexing/tasks":{"get":{"tags":["Indexing"],"summary":"Get All Tasks","description":"Get all active and recent tasks.\n\nReturns list of all tasks with their current status.\nUseful for monitoring multiple concurrent operations.","operationId":"get_all_tasks_api_indexing_tasks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get All Tasks Api Indexing Tasks Get"}}}}}}},"/api/indexing/tasks/cleanup":{"delete":{"tags":["Indexing"],"summary":"Cleanup Completed Tasks","description":"Clean up completed tasks from memory.\n\nRemoves tasks with status: completed, failed, or cancelled.\nKeeps only active (running/idle) tasks.","operationId":"cleanup_completed_tasks_api_indexing_tasks_cleanup_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}}}}},"/api/documents":{"get":{"tags":["Documents"],"summary":"List Documents","description":"Get list of all indexed documents.\n\nReturns document metadata including:\n- Filename and file type\n- Number of chunks and characters\n- Indexing timestamp\n\nSupports pagination and sorting.\n\n**Sort options:**\n- `indexed_at` - Sort by indexing date (default)\n- `file_name` - Sort alphabetically\n- `total_chunks` - Sort by chunk count\n- `total_characters` - Sort by content size\n\n**Order:**\n- `desc` - Descending (default)\n- `asc` - Ascending","operationId":"list_documents_api_documents_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","default":"indexed_at","title":"Sort By"}},{"name":"order","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Order"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/{filename}":{"get":{"tags":["Documents"],"summary":"Get Document","description":"Get detailed information about a specific document.\n\nReturns:\n- Complete document metadata\n- Chunk statistics and indices\n- Quality metrics\n- Optionally: all document chunks with content\n\n**Parameters:**\n- `filename` - Document filename (URL encoded if contains special chars)\n- `include_chunks` - Include full chunk content (default: false)\n\n**Warning:** Setting `include_chunks=true` for large documents may result in large responses","operationId":"get_document_api_documents__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}},{"name":"include_chunks","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Chunks"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentDetailResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Documents"],"summary":"Delete Document","description":"Delete document from index.\n\n**⚠️ WARNING:** This permanently deletes the document from the vector database!\n\n**Process:**\n1. Checks if document exists\n2. Deletes document metadata\n3. Optionally removes all associated chunks and embeddings\n\n**Parameters:**\n- `filename` - Document filename to delete\n- `delete_chunks` - Also delete chunks (default: true, recommended)\n\n**Note:** This does NOT delete the source markdown file, only database records.\n\nCannot be undone. Use with caution.","operationId":"delete_document_api_documents__filename__delete","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}},{"name":"delete_chunks","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Delete Chunks"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteDocumentResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/stats/overview":{"get":{"tags":["Documents"],"summary":"Get Document Stats","description":"Get comprehensive document statistics.\n\nReturns detailed analytics including:\n- Total documents, chunks, and characters\n- Chunk distribution (min, max, average)\n- File type breakdown\n- Size distribution categories\n- Quality metrics\n\nUseful for monitoring index health and data distribution.","operationId":"get_document_stats_api_documents_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentStatsResponse"}}}}}}},"/api/documents/search":{"post":{"tags":["Documents"],"summary":"Search Documents","description":"Search documents by metadata criteria.\n\n**Search filters:**\n- `filename_pattern` - Filename pattern with wildcards (%, _)\n- `min_chunks` - Minimum number of chunks\n- `max_chunks` - Maximum number of chunks\n- `indexed_after` - Filter by indexing date\n- `limit` - Maximum results (1-1000)\n\n**Examples:**\n```json\n{\n  \"filename_pattern\": \"report%\",\n  \"min_chunks\": 10,\n  \"limit\": 50\n}\n```\n\nReturns matching documents with metadata.","operationId":"search_documents_api_documents_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/{filename}/chunks":{"get":{"tags":["Documents"],"summary":"Get Document Chunks","description":"Get chunks for a specific document with pagination.\n\nReturns:\n- Document metadata\n- Paginated list of chunks with content\n- Chunk indices and metadata\n\n**Pagination:**\n- `limit` - Chunks per page (1-1000, default: 100)\n- `offset` - Starting position (default: 0)\n\nUseful for reviewing document content and debugging chunking quality.","operationId":"get_document_chunks_api_documents__filename__chunks_get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentDetailResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/upload":{"post":{"tags":["Documents"],"summary":"Upload Document","description":"Upload a document file to Supabase Storage for processing.\n\n**Process:**\n1. Validates file type (supports all Docling formats)\n2. Uploads to Supabase Storage (bucket: vehicle-documents, folder: raw/pending/)\n3. Creates entry in document_registry\n4. File is ready for conversion and indexing\n\n**Supported formats:**\n- Documents: PDF, DOCX, DOC, PPTX, PPT\n- Text: TXT, HTML, HTM\n- Images: PNG, JPG, JPEG, TIFF (with OCR)\n\n**Parameters:**\n- `file` - Document file to upload\n- `auto_index` - Not used (kept for API compatibility)\n\n**Workflow:**\n1. Upload files here → Supabase Storage\n2. Start conversion (Docling downloads from Storage)\n3. Start indexing (chunking + embeddings)\n\n**Example:**\n```bash\ncurl -X POST \"http://localhost:8000/api/documents/upload\" \\\n     -F \"file=@document.docx\"\n```\n\nReturns upload confirmation with file details.","operationId":"upload_document_api_documents_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_api_documents_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Upload Document Api Documents Upload Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/documents/missing/files":{"get":{"tags":["Documents"],"summary":"Get Missing Documents","description":"Get files present in markdown directory but missing from database.\n\n**Analysis:**\n- Scans markdown directory for .md files\n- Compares with database records\n- Identifies files that should be indexed but aren't\n\n**Returns:**\n- List of missing files\n- Counts and success rate\n- Comparison statistics\n\n**Use cases:**\n- Detecting indexing failures\n- Finding documents that need re-indexing\n- Verifying index completeness\n\n**Troubleshooting:** If many files are missing, consider running full reindex.","operationId":"get_missing_documents_api_documents_missing_files_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissingDocumentsResponse"}}}}}}},"/api/conversion/start":{"post":{"tags":["Conversion"],"summary":"Start Conversion","description":"Start document conversion process (Docling - Part 1).\n\n**Converts raw documents to markdown:**\n- PDF → Markdown\n- DOCX → Markdown\n- PPTX → Markdown\n- HTML → Markdown\n- Images → Markdown (with OCR)\n\n**Pipeline:**\n1. Scans input directory for supported formats\n2. Converts each document using Docling\n3. Saves markdown to output directory\n4. Extracts and saves metadata\n\n**Parameters:**\n- `input_dir` - Custom input directory (overrides config)\n- `output_dir` - Custom output directory (overrides config)\n- `incremental` - Skip already converted files (default: true)\n- `formats` - Specific formats to convert (e.g., ['pdf', 'docx'])\n- `enable_ocr` - Enable OCR for images (overrides config)\n- `max_file_size_mb` - Maximum file size limit (overrides config)\n\n**Example:**\n```json\n{\n  \"incremental\": true,\n  \"formats\": [\"pdf\", \"docx\"],\n  \"enable_ocr\": true,\n  \"max_file_size_mb\": 50\n}\n```\n\nProcess runs in background. Use `/status` endpoint to check progress.","operationId":"start_conversion_api_conversion_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/status":{"get":{"tags":["Conversion"],"summary":"Get Conversion Status","description":"Get conversion process status.\n\n**Returns:**\n- Current progress (files converted)\n- Processing stage\n- ETA for completion\n- List of converted files\n- Any errors encountered\n\n**Parameters:**\n- `task_id` - Conversion task ID (optional, uses latest if not provided)\n\n**Progress tracking:**\n- `status` - pending, converting, completed, failed\n- `progress_percentage` - 0-100%\n- `current_file` - Currently converting file\n- `estimated_remaining` - Seconds until completion\n\n**Example response:**\n```json\n{\n  \"task_id\": \"conv_abc123\",\n  \"progress\": {\n    \"status\": \"converting\",\n    \"total_files\": 10,\n    \"converted_files\": 7,\n    \"progress_percentage\": 70.0,\n    \"current_file\": \"report.pdf\"\n  }\n}\n```","operationId":"get_conversion_status_api_conversion_status_get","parameters":[{"name":"task_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionStatusResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/formats":{"get":{"tags":["Conversion"],"summary":"Get Supported Formats","description":"Get list of supported document formats.\n\n**Returns:**\n- All supported file extensions\n- OCR capability status\n- Maximum file size limit\n- Additional conversion settings\n\n**Supported formats:**\n- **Documents:** PDF, DOCX, DOC, PPTX, PPT\n- **Text:** TXT, HTML, HTM\n- **Images:** PNG, JPG, JPEG, TIFF (with OCR)\n\n**OCR features:**\n- Text extraction from images\n- Scanned PDF support\n- Multiple language support\n- Table extraction\n\nUse this endpoint to validate file formats before upload/conversion.","operationId":"get_supported_formats_api_conversion_formats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupportedFormatsResponse"}}}}}}},"/api/conversion/results":{"get":{"tags":["Conversion"],"summary":"Get Conversion Results","description":"Get detailed conversion results.\n\n**Returns for each file:**\n- Conversion status (success/failed)\n- Output markdown path\n- Conversion time\n- File size statistics\n- Error message (if failed)\n\n**Filters:**\n- `include_failed` - Include failed conversions (default: true)\n- `include_skipped` - Include skipped files (default: false)\n\n**Use cases:**\n- Reviewing conversion quality\n- Debugging conversion failures\n- Getting output file paths\n- Performance analysis\n\nUseful for post-conversion review and troubleshooting.","operationId":"get_conversion_results_api_conversion_results_get","parameters":[{"name":"task_id","in":"query","required":true,"schema":{"type":"string","title":"Task Id"}},{"name":"include_failed","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Failed"}},{"name":"include_skipped","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Skipped"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionStatusResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/validate":{"post":{"tags":["Conversion"],"summary":"Validate Documents","description":"Validate documents before conversion.\n\n**Pre-flight checks:**\n- File format is supported\n- File size within limits\n- File is readable and not corrupted\n- Directory structure is valid\n\n**Parameters:**\n- `input_dir` - Directory to validate (uses config default if not provided)\n- `check_formats` - Validate file formats (default: true)\n- `check_size` - Validate file sizes (default: true)\n- `max_size_mb` - Custom size limit (uses config default if not provided)\n\n**Returns validation report:**\n- Valid files count\n- Invalid files with reasons\n- Size violations\n- Format violations\n\n**Example:**\n```json\n{\n  \"input_dir\": \"./data/raw\",\n  \"check_formats\": true,\n  \"check_size\": true,\n  \"max_size_mb\": 50\n}\n```\n\nReturns validation results without starting conversion.\nUse before conversion to identify potential issues.","operationId":"validate_documents_api_conversion_validate_post","parameters":[{"name":"input_dir","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Input Dir"}},{"name":"check_formats","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Check Formats"}},{"name":"check_size","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Check Size"}},{"name":"max_size_mb","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Size Mb"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/retry":{"post":{"tags":["Conversion"],"summary":"Retry Failed Conversions","description":"Retry failed conversions from a previous task.\n\n**Process:**\n1. Identifies files that failed in original task\n2. Attempts conversion again with same settings\n3. Creates new task for retry attempt\n\n**Parameters:**\n- `task_id` - Original task ID with failures\n\n**Use cases:**\n- Recovering from temporary failures\n- Retrying after fixing source files\n- Handling transient errors\n\n**Example:**\n```bash\ncurl -X POST \"http://localhost:8000/api/conversion/retry?task_id=conv_abc123\"\n```\n\nReturns new task ID for tracking retry progress.\nUseful when conversion failed due to temporary issues.","operationId":"retry_failed_conversions_api_conversion_retry_post","parameters":[{"name":"task_id","in":"query","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/task/{task_id}":{"delete":{"tags":["Conversion"],"summary":"Delete Conversion Task","description":"Delete conversion task and its results.\n\n**Process:**\n- Removes task from memory/storage\n- Does NOT delete converted markdown files\n- Only removes task tracking data\n\n**Parameters:**\n- `task_id` - Task ID to delete\n\n**Note:** Converted markdown files remain in output directory.\nThis only cleans up task tracking metadata.\n\nUse to clean up completed or failed tasks from memory.","operationId":"delete_conversion_task_api_conversion_task__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/conversion/history":{"get":{"tags":["Conversion"],"summary":"Get Conversion History","description":"Get history of conversion tasks.\n\n**Returns:**\n- Past conversion runs\n- Success/failure status\n- Files processed\n- Processing time\n- Error summaries\n\n**Parameters:**\n- `limit` - Maximum tasks to return (1-100, default: 10)\n\n**Sorted by:** Most recent first\n\n**Use cases:**\n- Tracking conversion performance over time\n- Identifying recurring issues\n- Auditing conversion operations\n- Performance analysis\n\nUseful for monitoring conversion trends and quality.","operationId":"get_conversion_history_api_conversion_history_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConversionStatusResponse"},"title":"Response Get Conversion History Api Conversion History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/pipeline":{"get":{"tags":["Monitoring"],"summary":"Get Pipeline Status","description":"Get detailed pipeline status.\n\n**Returns status for each processing stage:**\n- Document Conversion (Part 1)\n- Document Loading\n- Chunking\n- Embedding Generation\n- Database Saving\n\n**Shows:**\n- Current stage\n- Progress per stage\n- Time spent in each stage\n- Errors per stage\n\n**Parameters:**\n- `task_id` - Specific task ID (optional, uses latest if not provided)\n\n**Example response:**\n```json\n{\n  \"overall_status\": \"running\",\n  \"current_stage\": \"embedding\",\n  \"stages\": [\n    {\n      \"stage_name\": \"Loading\",\n      \"status\": \"completed\",\n      \"progress_percentage\": 100.0\n    }\n  ],\n  \"overall_progress\": 65.0\n}\n```\n\nUse for real-time monitoring of indexing pipeline.","operationId":"get_pipeline_status_api_monitoring_pipeline_get","parameters":[{"name":"task_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/performance":{"get":{"tags":["Monitoring"],"summary":"Get Performance Metrics","description":"Get detailed performance metrics.\n\n**Returns:**\n- Processing speed (chunks/second)\n- Average time per file/chunk\n- Resource usage (memory, CPU)\n- Gemini API metrics:\n  - API calls made\n  - Calls per minute\n  - Rate limit hits\n  - API errors\n- Processing efficiency\n\n**Parameters:**\n- `task_id` - Specific task ID (optional)\n\n**Metrics breakdown:**\n- `current_speed` - Current processing rate\n- `average_speed` - Overall average rate\n- `peak_speed` - Maximum observed rate\n- `api_calls_per_minute` - Gemini API usage rate\n- `processing_efficiency` - Success rate percentage\n\n**Use cases:**\n- Performance optimization\n- Capacity planning\n- Bottleneck identification\n- Cost analysis (API usage)\n\nUseful for optimization and capacity planning.","operationId":"get_performance_metrics_api_monitoring_performance_get","parameters":[{"name":"task_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceMetricsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/errors":{"get":{"tags":["Monitoring"],"summary":"Get Error Logs","description":"Get error logs from indexing process.\n\n**Returns:**\n- Error timestamp\n- Error type (conversion, chunking, embedding, database)\n- Error message\n- Affected file\n- Processing stage\n\n**Filters:**\n- `limit` - Maximum errors to return (1-500, default: 50)\n- `error_type` - Filter by error type (optional)\n- `since` - Filter by date (default: last 7 days)\n\n**Error types:**\n- `conversion_error` - Document conversion failures\n- `chunking_error` - Text chunking issues\n- `embedding_error` - Gemini API failures\n- `database_error` - Vector store issues\n- `validation_error` - Content validation failures\n\n**Example:**\n```bash\ncurl \"http://localhost:8000/api/monitoring/errors?limit=20&error_type=embedding_error\"\n```\n\nUseful for debugging and identifying systematic issues.","operationId":"get_error_logs_api_monitoring_errors_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"error_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Type"}},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Since"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorLogResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/queue":{"get":{"tags":["Monitoring"],"summary":"Get Processing Queue","description":"Get current processing queue.\n\n**Shows:**\n- Files waiting to be processed\n- Current file being processed\n- Position in queue\n- Estimated start time for each file\n- Estimated completion time\n\n**Queue information:**\n- `queue_length` - Number of files waiting\n- `processing_now` - Currently processing file\n- `estimated_completion` - When queue will be empty\n\n**Use cases:**\n- Monitoring batch processing progress\n- Estimating wait times\n- Identifying bottlenecks\n- Queue management\n\nUseful for monitoring batch processing progress.","operationId":"get_processing_queue_api_monitoring_queue_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessingQueueResponse"}}}}}}},"/api/monitoring/chunks/analysis":{"get":{"tags":["Monitoring"],"summary":"Get Chunk Analysis","description":"Get comprehensive chunk analysis.\n\n**Analyzes:**\n- Total chunks in database\n- Chunk size distribution (min, max, avg, median)\n- Chunks per file statistics\n- Quality distribution (excellent, good, moderate, poor)\n- Top files by chunk count\n\n**Quality categories:**\n- **Excellent:** > 1000 chars per chunk\n- **Good:** 500-1000 chars\n- **Moderate:** 200-500 chars\n- **Poor:** < 200 chars\n\n**Statistics:**\n- Size metrics (min, max, avg, median)\n- Distribution across files\n- Quality breakdown\n- Top contributors\n\n**Use cases:**\n- Data quality assessment\n- Chunk effectiveness evaluation\n- Configuration optimization\n- Identifying problematic documents\n\nUseful for understanding data quality and chunk effectiveness.","operationId":"get_chunk_analysis_api_monitoring_chunks_analysis_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChunkAnalysisResponse"}}}}}}},"/api/monitoring/database/stats":{"get":{"tags":["Monitoring"],"summary":"Get Database Stats","description":"Get database statistics.\n\n**Returns:**\n- Total records in database\n- Table size and index size\n- Vector dimension\n- Total vectors stored\n- Average query time\n- Connection status\n- Last backup timestamp\n\n**Database metrics:**\n- `total_records` - Number of vector records\n- `table_size_mb` - Storage used by table\n- `index_size_mb` - Storage used by indexes\n- `vector_dimension` - Embedding dimension (e.g., 768)\n- `total_vectors` - Count of non-null embeddings\n\n**Health indicators:**\n- Connection status\n- Query performance\n- Storage efficiency\n- Backup status\n\n**Use cases:**\n- Database health monitoring\n- Storage planning\n- Performance optimization\n- Backup verification\n\nCritical for monitoring database health and performance.","operationId":"get_database_stats_api_monitoring_database_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseStatsResponse"}}}}}}},"/api/monitoring/health":{"get":{"tags":["Monitoring"],"summary":"Health Check","description":"Quick health check for indexing system.\n\n**Returns:**\n- Overall system health status\n- Component availability:\n  - Database connection\n  - Gemini API access\n  - File system access\n- Active tasks count\n- Recent errors count\n\n**Health status values:**\n- `healthy` - All systems operational\n- `degraded` - Some issues detected\n- `unhealthy` - Critical failures\n\n**Components checked:**\n- Database connectivity\n- Gemini API availability\n- File system access\n- Indexing service status\n\n**Response format:**\n```json\n{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2024-01-01T12:00:00\",\n  \"components\": {\n    \"database\": \"operational\",\n    \"gemini_api\": \"operational\"\n  },\n  \"active_tasks\": 0,\n  \"recent_errors\": 0\n}\n```\n\nLightweight endpoint for monitoring tools and health checks.","operationId":"health_check_api_monitoring_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Api Monitoring Health Get"}}}}}}},"/api/monitoring/metrics/summary":{"get":{"tags":["Monitoring"],"summary":"Get Metrics Summary","description":"Get aggregated metrics summary.\n\n**Combines data from:**\n- Pipeline status\n- Performance metrics\n- Error logs\n- Database stats\n\n**Returns comprehensive overview:**\n- Pipeline state and progress\n- Processing performance\n- Data statistics\n- Error summary\n- Health indicators\n\n**Summary sections:**\n- **Pipeline:** Current status and progress\n- **Performance:** Speed and efficiency metrics\n- **Data:** Document and chunk counts\n- **Errors:** Error counts and types\n- **Health:** Overall system health\n\n**Example response:**\n```json\n{\n  \"timestamp\": \"2024-01-01T12:00:00\",\n  \"pipeline\": {\n    \"status\": \"running\",\n    \"progress\": 75.0\n  },\n  \"performance\": {\n    \"processing_speed\": 15.5,\n    \"efficiency\": 98.2\n  },\n  \"data\": {\n    \"total_documents\": 1000,\n    \"total_chunks\": 50000\n  },\n  \"errors\": {\n    \"total\": 5,\n    \"last_24h\": 2\n  },\n  \"health\": {\n    \"overall\": \"healthy\"\n  }\n}\n```\n\nReturns comprehensive overview in single response.\nUseful for dashboards and monitoring tools.","operationId":"get_metrics_summary_api_monitoring_metrics_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Metrics Summary Api Monitoring Metrics Summary Get"}}}}}}},"/api/vehicles":{"get":{"tags":["Vehicles"],"summary":"List Vehicles","description":"Get list of all vehicles.\n\n**Features:**\n- Pagination support\n- Filter by status\n- Returns expiry indicators\n\n**Example:**\n```\nGET /api/vehicles?status=active&page=1&page_size=50\n```\n\n**Returns:**\n- List of vehicles with metadata\n- Total count\n- Expiry status for each vehicle","operationId":"list_vehicles_api_vehicles_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (active, maintenance, etc.)","title":"Status"},"description":"Filter by status (active, maintenance, etc.)"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":100,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleListResponse"}}}},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Vehicles"],"summary":"Create Vehicle","description":"Create a new vehicle.\n\n**Required:**\n- `registration_number` - Unique VRN\n\n**Optional:**\n- `vin_number` - 17-character VIN (must be unique)\n- `make` - Vehicle manufacturer\n- `model` - Vehicle model\n- `insurance_expiry_date` - Insurance expiry\n- `motor_tax_expiry_date` - Motor tax expiry\n- `nct_expiry_date` - NCT expiry\n- `status` - Vehicle status (default: active)\n- `current_driver_id` - Current driver UUID\n\n**Example:**\n```json\n{\n  \"registration_number\": \"191-D-12345\",\n  \"vin_number\": \"WF0XXGCDXXB12345\",\n  \"make\": \"Ford\",\n  \"model\": \"Focus\",\n  \"insurance_expiry_date\": \"2025-12-01\",\n  \"motor_tax_expiry_date\": \"2025-08-31\",\n  \"nct_expiry_date\": \"2026-05-20\",\n  \"status\": \"active\"\n}\n```\n\n**Returns:**\n- Created vehicle with UUID\n- Expiry indicators calculated","operationId":"create_vehicle_api_vehicles_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleResponse"}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vehicles/{vehicle_id}":{"get":{"tags":["Vehicles"],"summary":"Get Vehicle","description":"Get detailed vehicle information with documents.\n\n**Returns:**\n- Complete vehicle details\n- All linked documents\n- Document statistics\n- Expiry indicators\n\n**Example:**\n```\nGET /api/vehicles/uuid-vehicle-123\n```\n\n**Use cases:**\n- View vehicle profile\n- Check linked documents\n- Review expiry dates","operationId":"get_vehicle_api_vehicles__vehicle_id__get","parameters":[{"name":"vehicle_id","in":"path","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleDetailResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Vehicles"],"summary":"Update Vehicle","description":"Update vehicle information.\n\n**All fields are optional** - only provided fields will be updated.\n\n**Example:**\n```json\n{\n  \"insurance_expiry_date\": \"2026-01-01\",\n  \"status\": \"maintenance\"\n}\n```\n\n**Use cases:**\n- Update expiry dates\n- Change vehicle status\n- Update make/model\n- Assign driver","operationId":"update_vehicle_api_vehicles__vehicle_id__put","parameters":[{"name":"vehicle_id","in":"path","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Vehicles"],"summary":"Delete Vehicle","description":"Delete vehicle from system.\n\n**⚠️ WARNING:** This permanently deletes the vehicle!\n\n**What happens:**\n- Vehicle record deleted\n- Documents are UNLINKED (vehicle_id set to NULL)\n- Documents remain in system but become unassigned\n- Chunks in vector database remain intact\n\n**Cannot be undone.**\n\n**Example:**\n```\nDELETE /api/vehicles/uuid-vehicle-123\n```","operationId":"delete_vehicle_api_vehicles__vehicle_id__delete","parameters":[{"name":"vehicle_id","in":"path","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vehicles/stats/overview":{"get":{"tags":["Vehicles"],"summary":"Get Vehicle Statistics","description":"Get comprehensive vehicle fleet statistics.\n\n**Returns:**\n- Total vehicles by status\n- Expiry warnings (within 30 days)\n- Expired documents count\n\n**Statistics include:**\n- `total_vehicles` - Total fleet size\n- `active_vehicles` - Currently active\n- `maintenance_vehicles` - Under maintenance\n- `inactive_vehicles` - Inactive/parked\n- `insurance_expiring_soon` - Expiring within 30 days\n- `motor_tax_expiring_soon` - Expiring within 30 days\n- `nct_expiring_soon` - Expiring within 30 days\n- `insurance_expired` - Already expired\n- `motor_tax_expired` - Already expired\n- `nct_expired` - Already expired\n\n**Use cases:**\n- Fleet management dashboard\n- Compliance monitoring\n- Renewal planning","operationId":"get_vehicle_statistics_api_vehicles_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleStatistics"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/vehicles/{vehicle_id}/documents/link":{"post":{"tags":["Vehicle Documents"],"summary":"Link Document To Vehicle","description":"Link a single document to a vehicle","operationId":"link_document_to_vehicle_api_vehicles__vehicle_id__documents_link_post","parameters":[{"name":"vehicle_id","in":"path","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkDocumentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkDocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vehicles/{vehicle_id}/documents/unlink":{"post":{"tags":["Vehicle Documents"],"summary":"Unlink Document From Vehicle","description":"Unlink a document from a vehicle","operationId":"unlink_document_from_vehicle_api_vehicles__vehicle_id__documents_unlink_post","parameters":[{"name":"vehicle_id","in":"path","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlinkDocumentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlinkDocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vehicles/documents/unassigned":{"get":{"tags":["Vehicle Documents"],"summary":"Get Unassigned Documents","description":"Get documents with status='unassigned' (no VRN found, need manual assignment)\n\nNOTE: This returns only documents that have been analyzed and found to have no VRN.\nFor documents needing analysis, use /documents/analyze endpoint.","operationId":"get_unassigned_documents_api_vehicles_documents_unassigned_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vehicles/documents/analyze":{"get":{"tags":["Vehicle Documents"],"summary":"Analyze Unassigned Documents","description":"Get all documents organized by status for Document Manager\n\nReturns:\n    {\n        'processed': [...],      # Documents needing VRN analysis (status='processed')\n        'grouped': [             # Documents with VRN found (status='pending_assignment')\n            {\n                'vrn': '191-D-12345',\n                'documents': [...],\n                'document_count': 2,\n                'vehicleDetails': {...} or None\n            }\n        ],\n        'unassigned': [...],     # Documents without VRN (status='unassigned')\n        'total_processed': 12,\n        'total_grouped': 5,\n        'total_unassigned': 3,\n        'vehicles_needing_creation': 2,\n        'vehicles_with_documents': 3\n    }","operationId":"analyze_unassigned_documents_api_vehicles_documents_analyze_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vehicles/documents/stats":{"get":{"tags":["Vehicle Documents"],"summary":"Get Document Statistics","description":"Get document statistics\n\nReturns statistics about documents by status, type, and assignment state","operationId":"get_document_statistics_api_vehicles_documents_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vehicles/documents/by-status":{"get":{"tags":["Vehicle Documents"],"summary":"Get Documents By Status","description":"Get documents by specific status\n\nStatus values:\n- 'pending_indexing': Uploaded, waiting for indexing\n- 'processed': Indexed, waiting for VRN analysis\n- 'pending_assignment': VRN found, ready to link to vehicle\n- 'unassigned': No VRN found, needs manual assignment\n- 'assigned': Linked to vehicle","operationId":"get_documents_by_status_api_vehicles_documents_by_status_get","parameters":[{"name":"status","in":"query","required":true,"schema":{"type":"string","description":"Document status to filter by","title":"Status"},"description":"Document status to filter by"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inbox/link-batch":{"post":{"tags":["Document Inbox"],"summary":"Link Documents Batch","description":"Link multiple documents to a vehicle in one operation.","operationId":"link_documents_batch_api_inbox_link_batch_post","parameters":[{"name":"vehicle_id","in":"query","required":true,"schema":{"type":"string","title":"Vehicle Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkBatchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LinkBatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inbox/unlink-batch":{"post":{"tags":["Document Inbox"],"summary":"Unlink Documents Batch","description":"Unlink multiple documents from their vehicles.\nSets status back to 'unassigned'.","operationId":"unlink_documents_batch_api_inbox_unlink_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlinkBatchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlinkBatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inbox/create-vehicle-and-link":{"post":{"tags":["Document Inbox"],"summary":"Create Vehicle And Link Documents","description":"Create new vehicle and link documents in one operation.\nSets document status to 'assigned'.","operationId":"create_vehicle_and_link_documents_api_inbox_create_vehicle_and_link_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVehicleAndLinkRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVehicleAndLinkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inbox/search-vehicles":{"get":{"tags":["Document Inbox"],"summary":"Search Vehicles For Inbox","description":"Search vehicles by registration number for dropdown autocomplete.","operationId":"search_vehicles_for_inbox_api_inbox_search_vehicles_get","parameters":[{"name":"query","in":"query","required":false,"schema":{"type":"string","default":"","title":"Query"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inbox/find-vrn":{"post":{"tags":["Document Inbox"],"summary":"Find Vrn In Documents","description":"🆕 Find VRN (Vehicle Registration Numbers) in documents.\n\n**Process:**\n1. Gets documents with status='processed' (or specific documents if IDs provided)\n2. Reads document text from indexed chunks (vecs.documents)\n3. Tries regex pattern matching for Irish VRN formats\n4. Falls back to AI extraction if regex fails (optional)\n5. Updates document_registry:\n   - If VRN found: status='pending_assignment' + extracted_data.vrn\n   - If VRN not found: status='unassigned'\n\n**Use case:** \"Find VRN in Documents\" button in Document Manager\n\n**Request body (optional):**\n```json\n{\n  \"document_ids\": [\"uuid-1\", \"uuid-2\"],\n  \"use_ai\": true\n}\n```\n**Returns:**\n- Total documents processed\n- Count of VRN found / not found / failed\n- Breakdown by extraction method (regex, ai, filename)","operationId":"find_vrn_in_documents_api_inbox_find_vrn_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/FindVRNRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindVRNResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint with API information","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["Root"],"summary":"Health Check","description":"Quick health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_document_api_documents_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"auto_index":{"type":"boolean","title":"Auto Index","default":false}},"type":"object","required":["file"],"title":"Body_upload_document_api_documents_upload_post"},"ChunkAnalysisResponse":{"properties":{"total_chunks":{"type":"integer","title":"Total Chunks"},"total_files":{"type":"integer","title":"Total Files"},"avg_chunks_per_file":{"type":"number","title":"Avg Chunks Per File"},"min_chunk_size":{"type":"integer","title":"Min Chunk Size"},"max_chunk_size":{"type":"integer","title":"Max Chunk Size"},"avg_chunk_size":{"type":"number","title":"Avg Chunk Size"},"median_chunk_size":{"type":"integer","title":"Median Chunk Size"},"top_files":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Files","default":[]},"quality_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Quality Distribution","default":{"excellent":0,"good":0,"moderate":0,"poor":0}},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["total_chunks","total_files","avg_chunks_per_file","min_chunk_size","max_chunk_size","avg_chunk_size","median_chunk_size"],"title":"ChunkAnalysisResponse","description":"Response with chunk analysis"},"ConversionProgress":{"properties":{"status":{"$ref":"#/components/schemas/ConversionStatus"},"total_files":{"type":"integer","title":"Total Files","default":0},"converted_files":{"type":"integer","title":"Converted Files","default":0},"failed_files":{"type":"integer","title":"Failed Files","default":0},"skipped_files":{"type":"integer","title":"Skipped Files","default":0},"progress_percentage":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Progress Percentage"},"current_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current File"},"elapsed_time":{"type":"number","title":"Elapsed Time","default":0.0},"estimated_remaining":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Remaining"}},"type":"object","required":["status","progress_percentage"],"title":"ConversionProgress","description":"Document conversion progress"},"ConversionRequest":{"properties":{"input_dir":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Input Dir","description":"Input directory with raw documents"},"output_dir":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Dir","description":"Output directory for markdown files"},"incremental":{"type":"boolean","title":"Incremental","description":"Skip already converted files","default":true},"formats":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Formats","description":"Specific formats to convert (e.g., ['pdf', 'docx'])"},"enable_ocr":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enable Ocr","description":"Enable OCR for image-based documents"},"max_file_size_mb":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Max File Size Mb","description":"Maximum file size in MB"}},"type":"object","title":"ConversionRequest","description":"Request to start document conversion"},"ConversionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"task_id":{"type":"string","title":"Task Id"},"files_to_convert":{"type":"integer","title":"Files To Convert","default":0},"supported_formats":{"items":{"type":"string"},"type":"array","title":"Supported Formats","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","task_id"],"title":"ConversionResponse","description":"Response after starting conversion"},"ConversionResult":{"properties":{"filename":{"type":"string","title":"Filename"},"status":{"$ref":"#/components/schemas/ConversionStatus"},"input_path":{"type":"string","title":"Input Path"},"output_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Path"},"file_size":{"type":"integer","title":"File Size","default":0},"conversion_time":{"type":"number","title":"Conversion Time","default":0.0},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","default":{}}},"type":"object","required":["filename","status","input_path"],"title":"ConversionResult","description":"Result of document conversion"},"ConversionStatus":{"type":"string","enum":["pending","converting","completed","failed"],"title":"ConversionStatus","description":"Conversion process status"},"ConversionStatusResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"progress":{"$ref":"#/components/schemas/ConversionProgress"},"results":{"items":{"$ref":"#/components/schemas/ConversionResult"},"type":"array","title":"Results","default":[]},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["task_id","progress"],"title":"ConversionStatusResponse","description":"Response for conversion status check"},"CreateVehicleAndLinkRequest":{"properties":{"registration_number":{"type":"string","maxLength":50,"minLength":1,"title":"Registration Number"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"vin_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vin Number"},"document_ids":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Document Ids","description":"Document registry IDs to link"}},"type":"object","required":["registration_number","document_ids"],"title":"CreateVehicleAndLinkRequest","description":"Request to create vehicle and link documents"},"CreateVehicleAndLinkResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"vehicle":{"$ref":"#/components/schemas/VehicleResponse"},"linked_count":{"type":"integer","title":"Linked Count"},"failed_ids":{"items":{"type":"string"},"type":"array","title":"Failed Ids","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","vehicle","linked_count"],"title":"CreateVehicleAndLinkResponse","description":"Response after creating vehicle and linking documents"},"DatabaseStatsResponse":{"properties":{"total_records":{"type":"integer","title":"Total Records"},"table_size_mb":{"type":"number","title":"Table Size Mb"},"index_size_mb":{"type":"number","title":"Index Size Mb"},"vector_dimension":{"type":"integer","title":"Vector Dimension"},"total_vectors":{"type":"integer","title":"Total Vectors"},"avg_query_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Query Time Ms"},"connection_status":{"type":"string","title":"Connection Status"},"last_backup":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Backup"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["total_records","table_size_mb","index_size_mb","vector_dimension","total_vectors","connection_status"],"title":"DatabaseStatsResponse","description":"Response with database statistics"},"DeleteDocumentResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"filename":{"type":"string","title":"Filename"},"chunks_deleted":{"type":"integer","title":"Chunks Deleted"},"message":{"type":"string","title":"Message"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","filename","chunks_deleted","message"],"title":"DeleteDocumentResponse","description":"Response after deleting document"},"DocumentChunk":{"properties":{"chunk_index":{"type":"integer","title":"Chunk Index"},"content":{"type":"string","title":"Content"},"content_length":{"type":"integer","title":"Content Length"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","default":{}}},"type":"object","required":["chunk_index","content","content_length"],"title":"DocumentChunk","description":"Single document chunk information"},"DocumentDetailResponse":{"properties":{"document":{"$ref":"#/components/schemas/DocumentInfo"},"chunks":{"anyOf":[{"items":{"$ref":"#/components/schemas/DocumentChunk"},"type":"array"},{"type":"null"}],"title":"Chunks"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["document"],"title":"DocumentDetailResponse","description":"Response with detailed document information"},"DocumentInfo":{"properties":{"filename":{"type":"string","title":"Filename"},"file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Path"},"file_type":{"type":"string","title":"File Type","default":""},"total_chunks":{"type":"integer","title":"Total Chunks","default":0},"chunk_indices":{"items":{"type":"integer"},"type":"array","title":"Chunk Indices","default":[]},"total_characters":{"type":"integer","title":"Total Characters","default":0},"avg_chunk_length":{"type":"number","title":"Avg Chunk Length","default":0.0},"indexed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Indexed At"},"last_modified":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Modified"},"embedding_quality":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Embedding Quality"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","default":{}}},"type":"object","required":["filename"],"title":"DocumentInfo","description":"Detailed document information"},"DocumentListItem":{"properties":{"filename":{"type":"string","title":"Filename"},"total_chunks":{"type":"integer","title":"Total Chunks"},"total_characters":{"type":"integer","title":"Total Characters"},"indexed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Indexed At"},"file_type":{"type":"string","title":"File Type","default":""}},"type":"object","required":["filename","total_chunks","total_characters"],"title":"DocumentListItem","description":"Document item in list"},"DocumentListResponse":{"properties":{"documents":{"items":{"$ref":"#/components/schemas/DocumentListItem"},"type":"array","title":"Documents"},"total_documents":{"type":"integer","title":"Total Documents"},"total_chunks":{"type":"integer","title":"Total Chunks"},"total_characters":{"type":"integer","title":"Total Characters"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["documents","total_documents","total_chunks","total_characters"],"title":"DocumentListResponse","description":"Response with list of documents"},"DocumentRegistryItem":{"properties":{"id":{"type":"string","title":"Id"},"vehicle_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vehicle Id"},"raw_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw File Path"},"markdown_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Markdown File Path"},"document_type":{"anyOf":[{"$ref":"#/components/schemas/DocumentType"},{"type":"null"}]},"status":{"$ref":"#/components/schemas/DocumentRegistryStatus"},"extracted_data":{"additionalProperties":true,"type":"object","title":"Extracted Data","default":{}},"uploaded_at":{"type":"string","format":"date-time","title":"Uploaded At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"is_indexed":{"type":"boolean","title":"Is Indexed","default":false}},"type":"object","required":["id","status","uploaded_at","updated_at"],"title":"DocumentRegistryItem","description":"Document registry entry"},"DocumentRegistryStatus":{"type":"string","enum":["unassigned","assigned","pending_ocr","pending_indexing","processed","archived","failed"],"title":"DocumentRegistryStatus","description":"Document registry status"},"DocumentSearchRequest":{"properties":{"filename_pattern":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename Pattern","description":"Filename pattern (supports wildcards)"},"min_chunks":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Min Chunks","description":"Minimum number of chunks"},"max_chunks":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Max Chunks","description":"Maximum number of chunks"},"indexed_after":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Indexed After","description":"Filter by indexed date"},"limit":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Limit","description":"Maximum results to return","default":100}},"type":"object","title":"DocumentSearchRequest","description":"Request to search documents by metadata"},"DocumentStatsResponse":{"properties":{"total_documents":{"type":"integer","title":"Total Documents"},"total_chunks":{"type":"integer","title":"Total Chunks"},"total_characters":{"type":"integer","title":"Total Characters"},"avg_chunks_per_document":{"type":"number","title":"Avg Chunks Per Document"},"min_chunks":{"type":"integer","title":"Min Chunks"},"max_chunks":{"type":"integer","title":"Max Chunks"},"file_types":{"additionalProperties":{"type":"integer"},"type":"object","title":"File Types","default":{}},"size_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Size Distribution","default":{"small":0,"medium":0,"large":0,"very_large":0}},"avg_embedding_quality":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Embedding Quality"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["total_documents","total_chunks","total_characters","avg_chunks_per_document","min_chunks","max_chunks"],"title":"DocumentStatsResponse","description":"Response with document statistics"},"DocumentType":{"type":"string","enum":["insurance","motor_tax","nct_certificate","service_record","purchase_agreement","registration_document","drivers_manual","other"],"title":"DocumentType","description":"Document type"},"ErrorLogItem":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"error_type":{"type":"string","title":"Error Type"},"error_message":{"type":"string","title":"Error Message"},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name"},"stage":{"anyOf":[{"$ref":"#/components/schemas/ProcessingStage"},{"type":"null"}]},"details":{"additionalProperties":true,"type":"object","title":"Details","default":{}}},"type":"object","required":["timestamp","error_type","error_message"],"title":"ErrorLogItem","description":"Single error log entry"},"ErrorLogResponse":{"properties":{"errors":{"items":{"$ref":"#/components/schemas/ErrorLogItem"},"type":"array","title":"Errors"},"total_errors":{"type":"integer","title":"Total Errors"},"error_types":{"additionalProperties":{"type":"integer"},"type":"object","title":"Error Types","default":{}},"most_recent_error":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Most Recent Error"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["errors","total_errors"],"title":"ErrorLogResponse","description":"Response with error logs"},"ErrorResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":false},"error":{"type":"string","title":"Error"},"error_type":{"type":"string","title":"Error Type"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["error","error_type"],"title":"ErrorResponse","description":"Generic error response"},"FindVRNRequest":{"properties":{"document_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Document Ids","description":"Specific document IDs to process (null = all with status='processed')"},"use_ai":{"type":"boolean","title":"Use Ai","description":"Whether to use AI if regex fails","default":true}},"type":"object","title":"FindVRNRequest","description":"Request to find VRN in documents"},"FindVRNResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"total_processed":{"type":"integer","title":"Total Processed"},"vrn_found":{"type":"integer","title":"Vrn Found"},"vrn_not_found":{"type":"integer","title":"Vrn Not Found"},"failed":{"type":"integer","title":"Failed"},"extraction_methods":{"additionalProperties":{"type":"integer"},"type":"object","title":"Extraction Methods"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","total_processed","vrn_found","vrn_not_found","failed","extraction_methods"],"title":"FindVRNResponse","description":"Response after VRN extraction"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheck":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version","default":"1.0.0"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["status"],"title":"HealthCheck","description":"Health check response"},"IndexingHistoryItem":{"properties":{"task_id":{"type":"string","title":"Task Id"},"mode":{"$ref":"#/components/schemas/IndexingMode"},"status":{"$ref":"#/components/schemas/IndexingStatus"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"},"files_processed":{"type":"integer","title":"Files Processed","default":0},"chunks_created":{"type":"integer","title":"Chunks Created","default":0},"success_rate":{"type":"number","title":"Success Rate","default":0.0},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["task_id","mode","status","start_time"],"title":"IndexingHistoryItem","description":"Single indexing history record"},"IndexingHistoryResponse":{"properties":{"history":{"items":{"$ref":"#/components/schemas/IndexingHistoryItem"},"type":"array","title":"History"},"total_runs":{"type":"integer","title":"Total Runs"},"last_successful_run":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Successful Run"},"last_failed_run":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Failed Run"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["history","total_runs"],"title":"IndexingHistoryResponse","description":"Response with indexing history"},"IndexingMode":{"type":"string","enum":["full","incremental"],"title":"IndexingMode","description":"Indexing mode"},"IndexingProgress":{"properties":{"status":{"$ref":"#/components/schemas/IndexingStatus"},"stage":{"anyOf":[{"$ref":"#/components/schemas/ProcessingStage"},{"type":"null"}]},"current_stage_name":{"type":"string","title":"Current Stage Name","default":""},"progress_percentage":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Progress Percentage"},"total_files":{"type":"integer","title":"Total Files","default":0},"processed_files":{"type":"integer","title":"Processed Files","default":0},"failed_files":{"type":"integer","title":"Failed Files","default":0},"skipped_files":{"type":"integer","title":"Skipped Files","default":0},"registry_entries_created":{"type":"integer","title":"Registry Entries Created","default":0},"total_chunks":{"type":"integer","title":"Total Chunks","default":0},"processed_chunks":{"type":"integer","title":"Processed Chunks","default":0},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"elapsed_time":{"type":"number","title":"Elapsed Time","default":0.0},"estimated_remaining":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Remaining"},"current_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current File"},"current_batch":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Current Batch"},"total_batches":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Batches"},"processing_speed":{"type":"number","title":"Processing Speed","default":0.0},"avg_time_per_file":{"type":"number","title":"Avg Time Per File","default":0.0}},"type":"object","required":["status","progress_percentage"],"title":"IndexingProgress","description":"Current indexing progress"},"IndexingRequest":{"properties":{"mode":{"$ref":"#/components/schemas/IndexingMode","description":"Indexing mode: full or incremental","default":"incremental"},"documents_dir":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Documents Dir","description":"Custom documents directory (overrides config)"},"skip_conversion":{"type":"boolean","title":"Skip Conversion","description":"Skip document conversion (Part 1)","default":false},"skip_indexing":{"type":"boolean","title":"Skip Indexing","description":"Skip vector indexing (Part 2)","default":false},"batch_size":{"anyOf":[{"type":"integer","maximum":200.0,"minimum":1.0},{"type":"null"}],"title":"Batch Size","description":"Processing batch size"},"force_reindex":{"type":"boolean","title":"Force Reindex","description":"Force reindex even if files haven't changed","default":false},"delete_existing":{"type":"boolean","title":"Delete Existing","description":"Delete existing records before indexing","default":false}},"type":"object","title":"IndexingRequest","description":"Request to start indexing process"},"IndexingResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"task_id":{"type":"string","title":"Task Id"},"mode":{"$ref":"#/components/schemas/IndexingMode"},"estimated_duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Duration"},"files_to_process":{"type":"integer","title":"Files To Process","default":0},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","task_id","mode"],"title":"IndexingResponse","description":"Response after starting indexing"},"IndexingStatistics":{"properties":{"documents_loaded":{"type":"integer","title":"Documents Loaded","default":0},"documents_converted":{"type":"integer","title":"Documents Converted","default":0},"documents_indexed":{"type":"integer","title":"Documents Indexed","default":0},"skipped_files":{"type":"integer","title":"Skipped Files","default":0},"chunks_created":{"type":"integer","title":"Chunks Created","default":0},"chunks_valid":{"type":"integer","title":"Chunks Valid","default":0},"chunks_invalid":{"type":"integer","title":"Chunks Invalid","default":0},"chunks_saved":{"type":"integer","title":"Chunks Saved","default":0},"success_rate":{"type":"number","title":"Success Rate","default":0.0},"filter_success_rate":{"type":"number","title":"Filter Success Rate","default":0.0},"avg_chunk_length":{"type":"number","title":"Avg Chunk Length","default":0.0},"total_time":{"type":"number","title":"Total Time","default":0.0},"conversion_time":{"type":"number","title":"Conversion Time","default":0.0},"chunking_time":{"type":"number","title":"Chunking Time","default":0.0},"embedding_time":{"type":"number","title":"Embedding Time","default":0.0},"saving_time":{"type":"number","title":"Saving Time","default":0.0},"gemini_api_calls":{"type":"integer","title":"Gemini Api Calls","default":0},"gemini_tokens_used":{"type":"integer","title":"Gemini Tokens Used","default":0},"gemini_rate_limit_hits":{"type":"integer","title":"Gemini Rate Limit Hits","default":0}},"type":"object","title":"IndexingStatistics","description":"Statistics from indexing process"},"IndexingStatus":{"type":"string","enum":["idle","running","paused","completed","failed","cancelled"],"title":"IndexingStatus","description":"Indexing process status"},"IndexingStatusResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"progress":{"$ref":"#/components/schemas/IndexingProgress"},"statistics":{"anyOf":[{"$ref":"#/components/schemas/IndexingStatistics"},{"type":"null"}]},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","default":[]},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["task_id","progress"],"title":"IndexingStatusResponse","description":"Response for indexing status check"},"LinkBatchRequest":{"properties":{"registry_ids":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Registry Ids","description":"List of document registry UUIDs"}},"type":"object","required":["registry_ids"],"title":"LinkBatchRequest","description":"Request to link multiple documents to a vehicle"},"LinkBatchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"vehicle_id":{"type":"string","title":"Vehicle Id"},"linked_count":{"type":"integer","title":"Linked Count"},"failed_ids":{"items":{"type":"string"},"type":"array","title":"Failed Ids","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","vehicle_id","linked_count"],"title":"LinkBatchResponse","description":"Response after batch linking"},"LinkDocumentRequest":{"properties":{"registry_id":{"type":"string","title":"Registry Id"}},"type":"object","required":["registry_id"],"title":"LinkDocumentRequest","description":"Request to link a document to a vehicle"},"LinkDocumentResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"vehicle_id":{"type":"string","title":"Vehicle Id"},"document_id":{"type":"string","title":"Document Id"}},"type":"object","required":["success","message","vehicle_id","document_id"],"title":"LinkDocumentResponse","description":"Response after linking document"},"MissingDocumentsResponse":{"properties":{"missing_files":{"items":{"type":"string"},"type":"array","title":"Missing Files"},"total_missing":{"type":"integer","title":"Total Missing"},"total_in_directory":{"type":"integer","title":"Total In Directory"},"total_in_database":{"type":"integer","title":"Total In Database"},"success_rate":{"type":"number","title":"Success Rate"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["missing_files","total_missing","total_in_directory","total_in_database","success_rate"],"title":"MissingDocumentsResponse","description":"Response with documents missing from database"},"PerformanceMetricsResponse":{"properties":{"current_speed":{"type":"number","title":"Current Speed","default":0.0},"average_speed":{"type":"number","title":"Average Speed","default":0.0},"peak_speed":{"type":"number","title":"Peak Speed","default":0.0},"total_processing_time":{"type":"number","title":"Total Processing Time","default":0.0},"avg_time_per_file":{"type":"number","title":"Avg Time Per File","default":0.0},"avg_time_per_chunk":{"type":"number","title":"Avg Time Per Chunk","default":0.0},"memory_usage_mb":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Memory Usage Mb"},"cpu_usage_percent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cpu Usage Percent"},"api_calls":{"type":"integer","title":"Api Calls","default":0},"api_calls_per_minute":{"type":"number","title":"Api Calls Per Minute","default":0.0},"api_errors":{"type":"integer","title":"Api Errors","default":0},"api_rate_limit_hits":{"type":"integer","title":"Api Rate Limit Hits","default":0},"processing_efficiency":{"type":"number","title":"Processing Efficiency","default":0.0},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","title":"PerformanceMetricsResponse","description":"Response with performance metrics"},"PipelineStageMetrics":{"properties":{"stage_name":{"type":"string","title":"Stage Name"},"status":{"type":"string","title":"Status"},"progress_percentage":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Progress Percentage"},"items_processed":{"type":"integer","title":"Items Processed","default":0},"items_total":{"type":"integer","title":"Items Total","default":0},"elapsed_time":{"type":"number","title":"Elapsed Time","default":0.0},"estimated_remaining":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Remaining"},"errors":{"type":"integer","title":"Errors","default":0}},"type":"object","required":["stage_name","status","progress_percentage"],"title":"PipelineStageMetrics","description":"Metrics for a single pipeline stage"},"PipelineStatusResponse":{"properties":{"overall_status":{"$ref":"#/components/schemas/IndexingStatus"},"current_stage":{"anyOf":[{"$ref":"#/components/schemas/ProcessingStage"},{"type":"null"}]},"stages":{"items":{"$ref":"#/components/schemas/PipelineStageMetrics"},"type":"array","title":"Stages","default":[]},"overall_progress":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Progress"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["overall_status","overall_progress"],"title":"PipelineStatusResponse","description":"Response with pipeline status"},"ProcessingQueueItem":{"properties":{"filename":{"type":"string","title":"Filename"},"position":{"type":"integer","title":"Position"},"status":{"type":"string","title":"Status"},"estimated_start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Start Time"}},"type":"object","required":["filename","position","status"],"title":"ProcessingQueueItem","description":"Item in processing queue"},"ProcessingQueueResponse":{"properties":{"queue":{"items":{"$ref":"#/components/schemas/ProcessingQueueItem"},"type":"array","title":"Queue"},"queue_length":{"type":"integer","title":"Queue Length"},"processing_now":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Processing Now"},"estimated_completion":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Completion"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["queue","queue_length"],"title":"ProcessingQueueResponse","description":"Response with processing queue"},"ProcessingStage":{"type":"string","enum":["conversion","loading","chunking","embedding","saving","completed"],"title":"ProcessingStage","description":"Processing pipeline stage"},"ReindexFilesRequest":{"properties":{"filenames":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Filenames","description":"List of filenames to reindex"},"force":{"type":"boolean","title":"Force","description":"Force reindex even if files haven't changed","default":false}},"type":"object","required":["filenames"],"title":"ReindexFilesRequest","description":"Request to reindex specific files"},"SearchRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":1,"title":"Query","description":"Search query text"},"top_k":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Top K","description":"Maximum number of results to return","default":10},"similarity_threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Similarity Threshold","description":"Minimum similarity threshold"}},"type":"object","required":["query"],"title":"SearchRequest","description":"Simplified request model for search endpoint"},"SearchResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"query":{"type":"string","title":"Query","description":"Original search query"},"answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer","description":"Natural language answer generated by LLM"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results","description":"Search results"},"total_results":{"type":"integer","title":"Total Results","description":"Total number of results returned"},"search_time":{"type":"number","title":"Search Time","description":"Total search time in seconds"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Search metadata (methods used, timing breakdown)"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["query","total_results","search_time"],"title":"SearchResponse","description":"Simplified response model for search endpoint"},"SearchResult":{"properties":{"content":{"type":"string","title":"Content","description":"Document content preview"},"file_name":{"type":"string","title":"File Name","description":"Source document filename"},"score":{"type":"number","title":"Score","description":"Similarity/relevance score"},"source_method":{"type":"string","title":"Source Method","description":"Search method used (database_hybrid, vector_smart_threshold)"},"filename":{"type":"string","title":"Filename","description":"Filename (duplicate for frontend compatibility)"},"similarity_score":{"type":"number","title":"Similarity Score","description":"Similarity score (duplicate for frontend compatibility)"},"chunk_index":{"type":"integer","title":"Chunk Index","description":"Chunk index in document","default":0},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional result metadata"}},"type":"object","required":["content","file_name","score","source_method","filename","similarity_score"],"title":"SearchResult","description":"Single search result from backend"},"SuccessResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"Generic success response"},"SupportedFormatsResponse":{"properties":{"formats":{"items":{"type":"string"},"type":"array","title":"Formats"},"ocr_enabled":{"type":"boolean","title":"Ocr Enabled"},"max_file_size_mb":{"type":"integer","title":"Max File Size Mb"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["formats","ocr_enabled","max_file_size_mb"],"title":"SupportedFormatsResponse","description":"Response with supported document formats"},"SystemStatus":{"properties":{"status":{"type":"string","title":"Status"},"components":{"additionalProperties":true,"type":"object","title":"Components"},"database":{"additionalProperties":true,"type":"object","title":"Database"},"embedding":{"additionalProperties":true,"type":"object","title":"Embedding"},"hybrid_enabled":{"type":"boolean","title":"Hybrid Enabled"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["status","components","database","embedding","hybrid_enabled"],"title":"SystemStatus","description":"System status response"},"UnlinkBatchRequest":{"properties":{"registry_ids":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Registry Ids","description":"List of document registry UUIDs"}},"type":"object","required":["registry_ids"],"title":"UnlinkBatchRequest","description":"Request to unlink multiple documents"},"UnlinkBatchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"unlinked_count":{"type":"integer","title":"Unlinked Count"},"failed_ids":{"items":{"type":"string"},"type":"array","title":"Failed Ids","default":[]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["success","message","unlinked_count"],"title":"UnlinkBatchResponse","description":"Response after batch unlinking"},"UnlinkDocumentRequest":{"properties":{"registry_id":{"type":"string","title":"Registry Id"}},"type":"object","required":["registry_id"],"title":"UnlinkDocumentRequest","description":"Request to unlink a document from a vehicle"},"UnlinkDocumentResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"document_id":{"type":"string","title":"Document Id"}},"type":"object","required":["success","message","document_id"],"title":"UnlinkDocumentResponse","description":"Response after unlinking document"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VehicleCreateRequest":{"properties":{"registration_number":{"type":"string","maxLength":50,"minLength":1,"title":"Registration Number","description":"Vehicle registration number (VRN)"},"vin_number":{"anyOf":[{"type":"string","maxLength":17},{"type":"null"}],"title":"Vin Number","description":"Vehicle Identification Number (VIN)"},"make":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Make","description":"Vehicle manufacturer"},"model":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Model","description":"Vehicle model"},"insurance_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Insurance Expiry Date"},"motor_tax_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Motor Tax Expiry Date"},"nct_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Nct Expiry Date"},"status":{"anyOf":[{"$ref":"#/components/schemas/VehicleStatus"},{"type":"null"}],"default":"active"},"current_driver_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Driver Id"}},"type":"object","required":["registration_number"],"title":"VehicleCreateRequest","description":"Request to create a new vehicle"},"VehicleDetailResponse":{"properties":{"vehicle":{"$ref":"#/components/schemas/VehicleResponse"},"documents":{"items":{"$ref":"#/components/schemas/DocumentRegistryItem"},"type":"array","title":"Documents","default":[]},"total_documents":{"type":"integer","title":"Total Documents","default":0},"unassigned_documents":{"type":"integer","title":"Unassigned Documents","default":0},"pending_documents":{"type":"integer","title":"Pending Documents","default":0}},"type":"object","required":["vehicle"],"title":"VehicleDetailResponse","description":"Detailed vehicle information with documents"},"VehicleListResponse":{"properties":{"vehicles":{"items":{"$ref":"#/components/schemas/VehicleResponse"},"type":"array","title":"Vehicles"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page","default":1},"page_size":{"type":"integer","title":"Page Size","default":100},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["vehicles","total"],"title":"VehicleListResponse","description":"Response with list of vehicles"},"VehicleResponse":{"properties":{"id":{"type":"string","title":"Id"},"registration_number":{"type":"string","title":"Registration Number"},"vin_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vin Number"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"status":{"$ref":"#/components/schemas/VehicleStatus"},"insurance_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Insurance Expiry Date"},"motor_tax_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Motor Tax Expiry Date"},"nct_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Nct Expiry Date"},"current_driver_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Driver Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"is_insurance_expired":{"type":"boolean","title":"Is Insurance Expired","default":false},"is_motor_tax_expired":{"type":"boolean","title":"Is Motor Tax Expired","default":false},"is_nct_expired":{"type":"boolean","title":"Is Nct Expired","default":false},"days_until_insurance_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Until Insurance Expiry"},"days_until_motor_tax_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Until Motor Tax Expiry"},"days_until_nct_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Until Nct Expiry"}},"type":"object","required":["id","registration_number","status","created_at","updated_at"],"title":"VehicleResponse","description":"Basic vehicle information"},"VehicleSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/VehicleSearchResult"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["results","total"],"title":"VehicleSearchResponse","description":"Response with vehicle search results"},"VehicleSearchResult":{"properties":{"id":{"type":"string","title":"Id"},"registration_number":{"type":"string","title":"Registration Number"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"status":{"type":"string","title":"Status"}},"type":"object","required":["id","registration_number","status"],"title":"VehicleSearchResult","description":"Vehicle search result for dropdown"},"VehicleStatistics":{"properties":{"total_vehicles":{"type":"integer","title":"Total Vehicles","default":0},"active_vehicles":{"type":"integer","title":"Active Vehicles","default":0},"maintenance_vehicles":{"type":"integer","title":"Maintenance Vehicles","default":0},"inactive_vehicles":{"type":"integer","title":"Inactive Vehicles","default":0},"insurance_expiring_soon":{"type":"integer","title":"Insurance Expiring Soon","default":0},"motor_tax_expiring_soon":{"type":"integer","title":"Motor Tax Expiring Soon","default":0},"nct_expiring_soon":{"type":"integer","title":"Nct Expiring Soon","default":0},"insurance_expired":{"type":"integer","title":"Insurance Expired","default":0},"motor_tax_expired":{"type":"integer","title":"Motor Tax Expired","default":0},"nct_expired":{"type":"integer","title":"Nct Expired","default":0},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","title":"VehicleStatistics","description":"Vehicle fleet statistics"},"VehicleStatus":{"type":"string","enum":["active","maintenance","inactive","sold","archived"],"title":"VehicleStatus","description":"Vehicle status"},"VehicleUpdateRequest":{"properties":{"registration_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Registration Number"},"vin_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vin Number"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"insurance_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Insurance Expiry Date"},"motor_tax_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Motor Tax Expiry Date"},"nct_expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Nct Expiry Date"},"status":{"anyOf":[{"$ref":"#/components/schemas/VehicleStatus"},{"type":"null"}]},"current_driver_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Driver Id"}},"type":"object","title":"VehicleUpdateRequest","description":"Request to update vehicle information"}}}}